opam-version: "1.2"
maintainer: "Thomas Leonard <talex5@gmail.com>"
authors: "Thomas Leonard <talex5@gmail.com>"
homepage: "https://github.com/mirage/mirage-profile"
dev-repo: "https://github.com/mirage/mirage-profile.git"
bug-reports: "https://github.com/mirage/mirage-profile/issues"
doc: "https://mirage.github.io/mirage-profile"
license: "BSD-2-clause"

build: [
  [ "jbuilder" "subst"] {pinned}
  [ "env" "OCAMLFIND_TOOLCHAIN=esp32" "jbuilder" "build" "-p" "mirage-profile" "-j" jobs ]
]

depends: [
  "jbuilder"  {build & >="1.0+beta9"}
  "cstruct-esp32" {>= "3.0.0"}
  "ppx_cstruct" {build}
  "ocplib-endian-esp32"
  "lwt-esp32"
]
available: [ ocaml-version >= "4.03.0" ]

install: [["opam-installer" "--prefix=%{prefix}%/esp32-sysroot" "mirage-profile.install"]]